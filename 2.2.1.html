<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="assets/style.css">
    <title>2.2.1 Манипуляция ценой</title>
</head>
<body>
    <h3>2.2.1 Манипуляция ценой</h3>

<p>Манипуляция ценой является важным тестом для любых электронных коммерческих приложений, где пользователь может приобрести товар. Приложения обычно отправляют данные о цене на страницы оплаты, особенно когда платежный модуль не является частью веб-приложения и, следовательно, не имеет доступа к пользовательским сессиям или базе данных. Также можно найти приложения, которые отправляют данные о цене при выборе товара для добавления в корзину.</p>

<p>Иногда возможно купить тот же товар дешевле или даже бесплатно, манипулируя его ценой. Хотя в настоящее время очень редко можно найти приложение, которое принимает отрицательные числа через поля цены, это всегда нужно проверять, так как это может полностью изменить поток приложения.</p>

<p>Следующий интересный пример был замечен NCC Group в последние годы:</p>

<p>Механизм "добавить в корзину" на сайте электронной коммерции содержал параметр "цена" в скрытом поле, но приложение игнорировало измененную цену в запросе и использовало правильное значение. Однако позже было обнаружено, что при добавлении в корзину ряда товаров по акции (товаров с дополнительными скидками), приложение начинало использовать параметр цены в запросе и позволяло манипулировать ценой и использовать отрицательные значения (подробнее см. раздел "Динамические цены, цены с допуском или реферальные схемы").</p>

<p>Иногда, когда приложение плохо реализовано, можно изменить значение цены при обратном вызове с платежного сервера (который проходит через браузер пользователя, а не через внутренние API). В этом случае пользователь может изменить цену перед переходом на страницу оплаты, и после завершения транзакции цена в URL обратного вызова изменится, отражая первоначальное значение. Пользователь мог позже запросить возврат средств и получить эти деньги. Хотя в настоящее время редко можно увидеть уязвимое приложение такого типа, всегда стоит проверять наличие этой уязвимости.</p>
</body>
</html>